<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>GCC Training</title>

		<link rel="stylesheet" href="/dist/reset.css">
		<link rel="stylesheet" href="/dist/reveal.css">
		<link rel="stylesheet" href="/dist/theme/omu.css">

		<!-- twemoji-awesome for emojis -->
		<link rel="stylesheet" href="/dist/twemoji-awesome.css">
		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="/plugin/highlight/monokai.css">
		<link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
	</head>
	<body>
		<link rel="preload" href="https://omu.rce.so/omulator/" as=document />
		<div class="reveal">
			<div class="slides">
				<section>
					<h2>Buffer <span class="accent-underline">Overflows</span></h2>
					<p>GCC 2022</p>
					<div class="flex justify-center">
						<img src="/images/Boat.png" alt="boat chick">
					</div>
				</section>
				<section>
					<h2>What's been covered</h2>
					<p>x86-64 assembly, linux reverse-engineering!</p>
				</section>
				<section>
					<h2>Time to weaponise our knowledge</h2>
					<div class="flex justify-center">
						<img style="height: 300px" src="https://cdn.staticcrate.com/stock-hd/effects/footagecrate-emojicooldude-prev-full.png" alt="">
					</div>
				</section>
				<section>
					<h2>What is exploitation?</h2>
				</section>
				<section>
					<p>Binary exploitation is a broad topic within cybersecurity that comes down to finding a vulnerability in the program and exploiting it to ... modify the programâ€™s functions</p>
					<p>~infosecwriteups.com</p>
				</section>
				<section>
					<h2>A vulnerability as old as time</h2>
					<div class="flex justify-center">
						<img src="https://c.tenor.com/K8R7LThju04AAAAC/hack-the-planet.gif" alt="">
					</div>
				</section>
				<section>
					<small>Let's try to understand</small>
					<h2>Buffer overflows</h2>
				</section>
				<section>
					<h2>Revisiting the <span class="accent">stack</span></h2>
				</section>
				<section>
					<h2><code>Example #1</code></h2>
					<iframe loading="lazy" class="w-full h-omu" src="https://omu.rce.so/omulator/?code=bW92IHJheCwgMTAwMAptb3YgcmJ4LCAyMDAwCnB1c2ggcmF4CnB1c2ggcmJ4CnBvcCAgcmN4CnBvcCAgcmR4Cg%3D%3D" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<h2><code>Example #2</code></h2>
					<iframe loading="lazy" class="w-full h-omu-long" src="https://omu.rce.so/omulator/?code=Zm9vOgpwdXNoICByYnAKbW92ICAgcmJwLCByc3AKc3ViICAgcnNwLCAweDEwCm1vdiAgIERXT1JEIFBUUiBbcmJwLTB4Y10sIDB4M2U4Cm1vdiAgIERXT1JEIFBUUiBbcmJwLTB4OF0sIDB4N2QwCm1vdiAgIERXT1JEIFBUUiBbcmJwLTB4NF0sIDB4YmI4Cm1vdiAgIGVkeCwgRFdPUkQgUFRSIFtyYnAtMHhjXQptb3YgICBlYXgsIERXT1JEIFBUUiBbcmJwLTB4OF0KYWRkICAgZWR4LCBlYXgKbW92ICAgZWF4LCBEV09SRCBQVFIgW3JicC0weDRdCmFkZCAgIGVheCwgZWR4CmxlYXZlCnJldA%3D%3D" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<h2>With the stack, each function call maintains its local state!</h2>
				</section>
				<section>
					<div class="flex justify-center">
						<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2Fd%2Fd3%2FCall_stack_layout.svg%2F342px-Call_stack_layout.svg.png&f=1&nofb=1" alt="">
					</div>
				</section>
				<section>
					<h2><code>function stacks</code></h2>
					<iframe loading="lazy" class="w-full h-omu-long" src="https://omu.rce.so/omulator/?code=bWFpbjoKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIG1vdiAgIGVheCwgMAogIGNhbGwgIGEKICBub3AKICBwb3AgICByYnAKICByZXQKYToKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIHN1YiAgIHJzcCwgMTYKICBtb3YgICBEV09SRCBQVFIgW3JicC00XSwgMHhBQUFBCiAgbW92ICAgZWF4LCAwCiAgY2FsbCAgYgogIG5vcAogIGxlYXZlCiAgcmV0CmI6CiAgcHVzaCAgcmJwCiAgbW92ICAgcmJwLCByc3AKICBtb3YgICBEV09SRCBQVFIgW3JicC00XSwgMHhCQkJCCiAgbm9wCiAgcG9wICAgcmJwCiAgcmV0" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<h2>Are locals protected from each other?</h2>
				</section>
				<section>
					<h2>Consider the following:</h2>
					<pre><code class="c" data-trim data-noescape>
int foo(int index, int val) {
    int arr[4] = {1, 2, 3, 4};
    int untouched = 0x1337;
    arr[index] = val;
    return untouched;
}

void main() {
    foo(0, 0xdead);
}
					</code></pre>
				</section>
				<section>
					<h2><code>Function locals</code></h2>
					<iframe loading="lazy" class="w-full h-omu-long" src="https://omu.rce.so/omulator/?code=bWFpbjoKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIG1vdiAgIGVzaSwgMHhkZWFkCiAgbW92ICAgZWRpLCAwCiAgY2FsbCAgZm9vCiAgbm9wCiAgcG9wICAgcmJwCiAgcmV0CmZvbzoKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIHN1YiAgIHJzcCwgNDgKICBtb3YgICBEV09SRCBQVFIgW3JicC0zNl0sIGVkaQogIG1vdiAgIERXT1JEIFBUUiBbcmJwLTQwXSwgZXNpCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMzJdLCAxCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjhdLCAyCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjRdLCAzCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjBdLCA0CiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtNF0sIDB4MTMzNwogIG1vdiAgIGVheCwgRFdPUkQgUFRSIFtyYnAtMzZdCiAgY2RxZQogIG1vdiAgIGVkeCwgRFdPUkQgUFRSIFtyYnAtNDBdCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMzIrcmF4KjRdLCBlZHgKICBtb3YgICBlYXgsIERXT1JEIFBUUiBbcmJwLTRdCiAgbGVhdmUKICByZXQK" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<h2>What if we went out of bounds?</h2>
					<pre><code class="c" data-trim data-noescape>
int foo(int index, int val) {
    int arr[4] = {1, 2, 3, 4};
    int untouched = 0x1337;
    arr[index] = val;
    return untouched;
}

void main() {
    foo(7, 0xdead);
}
					</code></pre>
				</section>
				<section>
					<h2><code>Out of bounds locals</code></h2>
					<iframe loading="lazy" class="w-full h-omu-long" src="https://omu.rce.so/omulator/?code=bWFpbjoKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIG1vdiAgIGVzaSwgMHhkZWFkCiAgbW92ICAgZWRpLCAwCiAgY2FsbCAgZm9vCiAgbm9wCiAgcG9wICAgcmJwCiAgcmV0CmZvbzoKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIHN1YiAgIHJzcCwgNDgKICBtb3YgICBEV09SRCBQVFIgW3JicC0zNl0sIGVkaQogIG1vdiAgIERXT1JEIFBUUiBbcmJwLTQwXSwgZXNpCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMzJdLCAxCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjhdLCAyCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjRdLCAzCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjBdLCA0CiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtNF0sIDB4MTMzNwogIG1vdiAgIGVheCwgRFdPUkQgUFRSIFtyYnAtMzZdCiAgY2RxZQogIG1vdiAgIGVkeCwgRFdPUkQgUFRSIFtyYnAtNDBdCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMzIrcmF4KjRdLCBlZHgKICBtb3YgICBlYXgsIERXT1JEIFBUUiBbcmJwLTRdCiAgbGVhdmUKICByZXQK" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<h2>Hold on, this isn't a <strong>buffer</strong> overflow</h2>
					<div class="flex justify-center">
						<img src="https://cdn.discordapp.com/emojis/726046300881289248.png?size=96" alt="">
					</div>
				</section>
				<section>
					<h2>Consider the following:</h2>
					<pre><code class="c" data-trim data-noescape>
int main() {
    char buf[16];
    int untouched = 0xdead;
    gets(buf);
    return untouched;
}
					</code></pre>
				</section>
				<section>
					<h2><code>Buffer overflow (variable)</code></h2>
					<iframe loading="lazy" class="w-full h-omu-long" src="https://omu.rce.so/omulator/?code=bWFpbjoKICBwdXNoIHJicAogIG1vdiAgcmJwLCByc3AKICBzdWIgIHJzcCwgMzIKICBtb3YgIERXT1JEIFBUUiBbcmJwLTRdLCAweGRlYWQKICBsZWEgIHJheCwgW3JicC0zMl0KICBtb3YgIHJkaSwgcmF4CiAgY2FsbCBnZXRzCiAgbW92ICBlYXgsIERXT1JEIFBUUiBbcmJwLTRdCiAgbGVhdmUKICByZXQKCmdldHM6CiAgbW92ICByZHgsIDAKICBtb3YgIHJzaSwgMHgxMDAwCmdldHNfbG9vcDoKICBjbXAgIEJZVEUgUFRSIFtyc2krcmR4XSwgMAogIGplICAgZ2V0c19lbmQKICBtb3YgIGFsLCBCWVRFIFBUUiBbcnNpK3JkeF0KICBtb3YgIEJZVEUgUFRSIFtyZGkrcmR4XSwgYWwKICBhZGQgIHJkeCwgMQogIGptcCAgZ2V0c19sb29wCmdldHNfZW5kOgogIHJldA%3D%3D&input=NDE0MTQxNDE0MjQyNDI0MjQzNDM0MzQzNDQ0NDQ0NDQ%3D" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<h2>Pretty cool!</h2>
				</section>
				<section>
					<div class="flex justify-center">
						<img src="http://dearkidlovemom.com/wp-content/uploads/2014/10/but-wait-theres-more.jpg" alt="">
					</div>
				</section>
				<section>
					<h2>What happens when we overwrite saved rip</h2>
				</section>
				<section>
					<div class="flex justify-center">
						<img src="https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2Fd%2Fd3%2FCall_stack_layout.svg%2F342px-Call_stack_layout.svg.png&f=1&nofb=1" alt="">
					</div>
				</section>
				<section>
					<h2>Code</h2>
					<pre><code class="c" data-trim data-noescape>
int foo(int index, int val) {
    int arr[4] = {1, 2, 3, 4};
    int untouched = 0x1337;
    arr[index] = val;
    return untouched;
}

void main() {
    foo(?, 0xdead);
}
					</code></pre>
				</section>
				<section>
					<h2><code>Overwrite saved rip (OOB)</code></h2>
					<iframe loading="lazy" class="w-full h-omu-long" src="https://omu.rce.so/omulator/?code=bWFpbjoKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIG1vdiAgIGVzaSwgMHhkZWFkCiAgbW92ICAgZWRpLCAwCiAgY2FsbCAgZm9vCiAgbm9wCiAgcG9wICAgcmJwCiAgcmV0CmZvbzoKICBwdXNoICByYnAKICBtb3YgICByYnAsIHJzcAogIHN1YiAgIHJzcCwgNDgKICBtb3YgICBEV09SRCBQVFIgW3JicC0zNl0sIGVkaQogIG1vdiAgIERXT1JEIFBUUiBbcmJwLTQwXSwgZXNpCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMzJdLCAxCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjhdLCAyCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjRdLCAzCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMjBdLCA0CiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtNF0sIDB4MTMzNwogIG1vdiAgIGVheCwgRFdPUkQgUFRSIFtyYnAtMzZdCiAgY2RxZQogIG1vdiAgIGVkeCwgRFdPUkQgUFRSIFtyYnAtNDBdCiAgbW92ICAgRFdPUkQgUFRSIFtyYnAtMzIrcmF4KjRdLCBlZHgKICBtb3YgICBlYXgsIERXT1JEIFBUUiBbcmJwLTRdCiAgbGVhdmUKICByZXQK" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<h2>Code</h2>
					<pre><code class="c" data-trim data-noescape>
int main() {
    char buf[16];
    int untouched = 0xdead;
    gets(buf);
    return untouched;
}
					</code></pre>
				</section>
				<section>
					<h2><code>Overwrite saved rip (Buffer)</code></h2>
					<iframe loading="lazy" class="w-full h-omu-long" src="https://omu.rce.so/omulator/?code=bWFpbjoKICBwdXNoIHJicAogIG1vdiAgcmJwLCByc3AKICBzdWIgIHJzcCwgMzIKICBtb3YgIERXT1JEIFBUUiBbcmJwLTRdLCAweGRlYWQKICBsZWEgIHJheCwgW3JicC0zMl0KICBtb3YgIHJkaSwgcmF4CiAgY2FsbCBnZXRzCiAgbW92ICBlYXgsIERXT1JEIFBUUiBbcmJwLTRdCiAgbGVhdmUKICByZXQKCmdldHM6CiAgbW92ICByZHgsIDAKICBtb3YgIHJzaSwgMHgxMDAwCmdldHNfbG9vcDoKICBjbXAgIEJZVEUgUFRSIFtyc2krcmR4XSwgMAogIGplICAgZ2V0c19lbmQKICBtb3YgIGFsLCBCWVRFIFBUUiBbcnNpK3JkeF0KICBtb3YgIEJZVEUgUFRSIFtyZGkrcmR4XSwgYWwKICBhZGQgIHJkeCwgMQogIGptcCAgZ2V0c19sb29wCmdldHNfZW5kOgogIHJldA%3D%3D&input=NDE0MTQxNDE0MjQyNDI0MjQzNDM0MzQzNDQ0NDQ0NDQ%3D" scrolling="no" frameborder="0"></iframe loading="lazy">
				</section>
				<section>
					<div class="flex justify-center">
						<img src="https://wompampsupport.azureedge.net/fetchimage?siteId=7575&v=2&jpgQuality=100&width=700&url=https%3A%2F%2Fi.kym-cdn.com%2Fentries%2Ficons%2Foriginal%2F000%2F021%2F807%2Fig9OoyenpxqdCQyABmOQBZDI0duHk2QZZmWg2Hxd4ro.jpg" alt="">
					</div>
				</section>
				<section>
					<h2>Where to now?</h2>
				</section>
			</div>
		</div>

		<script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
		<script src="/dist/reveal.js"></script>
		<script src="/plugin/notes/notes.js"></script>
		<script src="/plugin/markdown/markdown.js"></script>
		<script src="/plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
